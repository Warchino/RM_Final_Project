/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'war'
    id 'java'
    id 'maven-publish'
    id 'org.gretty' version '2.3.1'
    id 'jacoco'
    id 'org.sonarqube' version '2.7'
}

repositories {
    mavenLocal()
    maven {
        url = 'https://oss.jfrog.org/artifactory/libs-snapshot'
    }

    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
}

dependencies {
    compile group: 'org.seedstack', name: 'web-composite', version: '17.11.2', ext: 'pom'
    compile group: 'org.seedstack.seed', name: 'seed-web-undertow', version: '3.4.1'
    compile group: 'org.seedstack.business', name: 'business-core', version: '4.2.0'
    compile group: 'org.seedstack.addons.modelmapper', name: 'modelmapper', version: '1.0.0'
    compile group: 'org.seedstack.addons.swagger', name: 'swagger', version: '2.0.1'
    compile group: 'org.seedstack.addons.w20', name: 'w20-bridge-web-bootstrap-3', version: '3.1.0'
    compile group: 'org.seedstack.addons.jpa', name: 'jpa', version: '4.0.0'
    compile group: 'com.zaxxer', name: 'HikariCP-java6', version: '2.3.5'
    compile group: 'org.hibernate', name: 'hibernate-entitymanager', version: '5.2.10.Final'
    compile group: 'org.hibernate', name: 'hibernate-ehcache', version: '5.2.10.Final'
    compile group: 'org.hsqldb', name: 'hsqldb', version: '2.3.5'
    compile group: 'org.glassfish', name: 'javax.el', version: '3.0.0'
    compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'
    compile group: 'org.seedstack.seed', name: 'seed-testing', version: '3.8.1', ext: 'pom'
    implementation group: 'commons-io', name: 'commons-io', version: '2.6'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

group = 'org.seedstack.samples'
version = '1.0.0-SNAPSHOT'
sourceCompatibility = '1.8'

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

gretty {
    httpPort = 8080
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

jacoco {
    toolVersion = "0.8.2"
    reportsDir = file("$buildDir/customJacocoReportDir")
}

jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination file("${buildDir}/reports/jacoco")
    }
}

sonarqube {
    properties {
        property "sonar.host.url", "http://10.28.130.5:9000"
        property "sonar.login", "d2d08d1514f208ba177f2c30180907d554acecde"
    }
}
